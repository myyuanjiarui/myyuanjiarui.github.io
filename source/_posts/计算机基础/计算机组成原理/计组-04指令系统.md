---
title: 指令系统
date: 2023-07-29 11:14 
description: 考研时任国林计算机组成原理的学习笔记
categories:
- 计算机基础
tags:
---
<head>
  <meta name="referrer" content="no-referrer" />
</head>


## 指令格式

### 指令功能

- 数据传送及输入输出：例如R1<——(R0)表示把寄存器0的内容送到寄存器1
- 算逻运算及移位运算：即算术运算（加减乘除）、逻辑运算（与或非异或）和移位运算（算术移位和逻辑移位）
- 转移控制：改变程序的执行顺序，通过改写PC来实现。即PC<—转移目标地址
  - 无条件转移(JMP)
  - 条件转移(BRANCH)
  - 调用(CALL)
  - 返回(RET)
- 其他操作

> 中断隐指令是硬件完成的，并不存在

### 指令基本格式

指令通常由操作码和地址码构成。

#### 操作码字段的功能及表示

- 定义

  操作码指定了指令要执行的操作或功能。换句话说，操作码告诉计算机硬件要执行的操作类型，如加、减、加载、存储等。

- 格式

  操作码的编码有定长和变长两种格式。
  
  - 定长
  
    定长操作码长度=⌈log2(操作类型个数)⌉。
  
  - 变长
  
    - 霍夫编码
  
      给出不同操作码的概率，构造霍夫曼树，进而对每个操作码进行编码
  
    - 霍夫扩展编码
  
      在霍夫曼编码的基础上，减少段数的种类并重新编码

#### 地址码字段的功能及表示

- 定义

  地址码指定了指令操作数的位置或如何获取它们。这可能包括寄存器编号、内存地址或其他方法来获取操作数。

- 格式

  根据地址码的个数可以分为零地址指令，单地址指令，双地址指令，三地址指令等。

  > 三地址指令：
  >
  > ```css
  > ADD R1, R2, R3
  > ```
  >
  > 一地址指令：
  >
  > ```css
  > LOAD R1, (1000)
  > ```

### 指令字

指令字是指计算机指令在内存或存储器中的二进制表示。

定长指令字结构的好处是结构简单，格式规整，但存取时间较长。

变长指令字结构的好处是灵活性好，但控制复杂。

## 操作数的存放方式

- 数据在存储器中的存放方式

  - 端序

    - 大端

      数据的最高字节(MSB)放在存储单元的最低位置。

    - 小端

      数据的最低字节(LSB)放在存储单元的最低位置。

  - 对齐

    - 不对齐

      即数据在存储器中的任意位置开始存放。

    - 边界对齐

      数据的起始存放地址必须是数据长度的整数倍。例如4字节的数据起始存放地址可以是4(0100)，8(1000)，12(1100)，16(10000)，20(10100)...；

      从二进制角度来看，n字节的数据的起始存放地址的低log2^n位必然全为0.

## 指令的寻址方式

### 有效地址的概念

寻址方式指的是根据地址码形成操作数地址或指令地址的方法。即从地址码中的形式地址(记为A)到指令中存储单元的有效地址(记为EA)的过程。

### 指令寻址

指令寻址是指形成下条指令地址的方法。分为顺序寻址和跳跃寻址。

- 顺序寻址：下条指令由PC加1形成。
- 跳跃寻址：下条指令为任意地址

### 数据寻址

数据寻址指形成操作数或操作数地址的方法。常见的数据寻址方式如下：

- 数据存放在寄存器中

  - 立即寻址

    <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830175707720.png" alt="image-20230830175707720" style="zoom:80%;float:left" />

  - 寄存器寻址

    <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830175746035.png" alt="image-20230830175746035" style="zoom:80%;float:left" />

- 数据存放在存储器中

  - 直接寻址

    <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180041257.png" alt="image-20230830180041257" style="zoom:80%;float:left" />

  - 间接寻址

    <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180109098.png" alt="image-20230830180109098" style="zoom:80%;float:left" />

  - 寄存器间接寻址

    <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180205101.png" alt="image-20230830180205101" style="zoom:80%;float:left" />

  - 偏移寻址

    - 变址寻址（变址寄存器内容可由用户改变）

      <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180446932.png" alt="image-20230830180446932" style="zoom:80%;float:left" />

    - 基址寻址（基址寄存器内容一般不变）

      <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180525420.png" alt="image-20230830180525420" style="zoom:80%;float:left" />

    - 相对寻址

      <img src="https://gitee.com/Marches7/piture-bed/raw/master/img/image-20230830180611142.png" alt="image-20230830180611142" style="zoom:80%;float:left" />
      
      > 偏移量为有符号数，而偏移后形成的地址为符号数

  - 隐含寻址

    指令中隐含着指令的操作数或者操作数的地址。

### 寻址方式的应用

| 寻址类型 | 常用寻址方式                               |
| -------- | ------------------------------------------ |
| 数据寻址 | 除相对寻址外，一般都可使用                 |
| 指令寻址 | 一般只使用直接、寄存器间接、相对、隐含方式 |



## CISC和RISC的基本概念

- CISC指令系统

  复杂指令系统计算机（Complex Instruction Set Computer,  CISC）主要特征如下：

  1. 采用变长指令字，有利于缩短指令长度
  2. 指令条数繁多，可以提供丰富的功能
  3. 指令功能复杂，执行时间较长
  4. 控制复杂

- RISC指令系统

  精简指令系统计算机（Reduced Instruction Set Computer, RISC）主要特征如下：

  1. 采用定长指令字结构
  2. 指令条数少且功能简单，执行性能较高，绝大多数指令都能在一时钟周期内完成
  3. 仅Load/Store指令能够对数据进行访问，控制简单
  4. 采用大量的内部通用寄存器，提高速度

# 提高部分

## 指令字长，存储字长与机器字长三者关系

- 机器字长一般是存储字长的整数倍，这样设计是出于性能和效率的考虑

- 指令字长与存储字长无整数关系。

  > 指令字长等于机器字长称为单字长指令；等于机器字长的一半称为半字长指令；等于机器字长的两倍称为双字长指令

- 指令字长与机器字长无关系
